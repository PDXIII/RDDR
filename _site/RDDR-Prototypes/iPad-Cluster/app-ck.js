// Config
function makeDragObjects(e,t){var n=new ImageView({width:50,height:50,x:e.x,y:e.y,image:"../assets/db/images/"+e.images[0]});n.addClass("dragObject");var r=new View({opacity:0,width:50,height:50,x:0,y:0});r.addClass("colorLayer");n.addSubView(r);n.dragger=new ui.Draggable(n);n.on(Events.DragStart,function(){n.bringToFront();n.scale=.7;n.animate({properties:{scale:1.2,opacity:.8},curve:"spring(1000, 10, 100)"})});n.on(Events.DragMove,function(){n.x<-5||n.x>340||n.y<-5||n.y>600?n._subViews[0].opacity=.5:n.x>-5&&n.x<340&&n.y>-5&&n.y<600&&(n._subViews[0].opacity=0);console.log(e.name+" / "+n.x+" / "+n.y)});n.on(Events.DragEnd,function(){n.x<-5||n.x>340||n.y<-5||n.y>600?n.animate({properties:{scale:2,opacity:0},curve:"spring(100, 10, 100)"}):n.animate({properties:{scale:1,opacity:1},curve:"spring(100, 10, 100)"})});if(t>8&&t<=13)stackObjArray.push(n);else if(t>13){tipObjArray.push(n);n.y+=100}ObjectSpace.addSubView(n)}function openStack(e,t){PlusButton.animate({properties:{rotation:45},time:e,curve:t});ObjectSpace.animate({properties:{y:ObjectSpace.originalFrame.y-130},time:e,curve:t});stackVisible=!0}function closeStack(e,t){PlusButton.animate({properties:{rotation:0},time:e,curve:t});ObjectSpace.animate({properties:{y:ObjectSpace.originalFrame.y},time:e,curve:t});stackVisible=!1}function openClusterInfo(e,t){Scene._subViews[3].animate({properties:{y:80},time:e,curve:t});Scene._subViews[3]._subViews[0]._subViews[2].animate({properties:{y:20},curve:"spring(200,10,10)"});clusterInfoVisible=!0}function closeClusterInfo(e,t){Scene._subViews[3].animate({properties:{y:722},time:e,curve:t});clusterInfoVisible=!1}function showKeyBoard(){Writing.opacity=0;Writing.y=78;Writing.animate({properties:{opacity:1},curve:"ease-in-out",time:100});KeyBoard.animate({properties:{y:282},curve:"ease-in-out",time:200})}function hideKeyBoard(){Writing.animate({properties:{opacity:0},curve:"ease-in-out",time:100});Writing.y=Writing.originalFrame.y;KeyBoard.animate({properties:{y:KeyBoard.originalFrame.y},time:200,curve:"ease-in-out"})}function makeEditButtons(e){Merkmal.on("click",function(){showKeyBoard();WorkBG.y=0});Merkmal.addClass("textField");Konzept.on("click",function(){showKeyBoard();WorkBG.y=-410});Konzept.addClass("textField");Kritik.on("click",function(){showKeyBoard();WorkBG.y=-820});Kritik.addClass("textField");FertigBtn.on("click",function(){hideKeyBoard();WorkBG.y=WorkBG.originalFrame.y});FertigBtn.addClass("btn")}function makePlusBtn(){PlusButton.on("click",function(){stackVisible?closeStack(time,curve):openStack(time,curve)});PlusButton.addClass("btn")}function makeSmallInfoBtn(){SmallInfoButton.on("click",function(){var e=250,t="ease-in-out";clusterInfoVisible?closeClusterInfo(e,t):openClusterInfo(e,t)});SmallInfoButton.addClass("btn")}function makeClusterInfo(e){var t=new View({width:384,height:1e3,x:0,y:722});t.addClass("clusterFrame");var n=new View({width:384,height:1e3,x:0,y:0}),r=new View({width:384,height:50,x:0,y:20,html:"zurück"});r.addClass("action");n.addSubView(r);var i=new View({width:384,height:infoGuiSize[1],x:0,y:214});i.addClass("infoButtonsRow");n.addSubView(i);var s=new View({width:infoGuiSize[0],height:infoGuiSize[1],x:18,y:0,html:"Info"});s.on("click",function(){s.opacity=1;o.opacity=.5;u.opacity=.5;n.animate({properties:{y:0},curve:curve,time:time});$(".scrollField").animate({scrollTop:0})});s.addClass("infoButton infoGui");i.addSubView(s);var o=new View({width:infoGuiSize[0],height:infoGuiSize[1],x:138,y:0,html:"Beschreibung",opacity:.5});o.on("click",function(){o.opacity=1;s.opacity=.5;u.opacity=.5;n.animate({properties:{y:-200},curve:curve,time:time});$(".scrollField").animate({scrollTop:310})});o.addClass("textButton infoGui");i.addSubView(o);var u=new View({width:infoGuiSize[0],height:infoGuiSize[1],x:258,y:0,html:"DNA",opacity:.5});u.on("click",function(){u.opacity=1;s.opacity=.5;o.opacity=.5;n.animate({properties:{y:-200},curve:curve,time:time});$(".scrollField").animate({scrollTop:890})});u.addClass("dnaButton infoGui");i.addSubView(u);var a=new ImageView({width:174,height:174,x:102,y:60,image:"../assets/db/images/ClusterInfoImage.jpg"});a.addClass("clusterInfoImage");n.addSubView(a);var f=new View({width:174,height:174,x:0,y:0,opacity:0});f.addClass("clusterColorLayer");a.addSubView(f);a.originalFrame=a.frame;a.originalFrame.y=20;a.dragger=new ui.Draggable(a);a.on(Events.DragMove,function(){a.x=102;if(a.y<=20)a.y=20;else if(a.y>=60){a._subViews[0].opacity=.5;a.y=60}else a._subViews[0].opacity=0});a.dragger.on(Events.DragEnd,function(){a.y>=60?closeClusterInfo(time,curve):a.animate({properties:{y:20},curve:"spring(200,10,10)"});a._subViews[0].opacity=0});var l=new View({width:386,height:5,x:0,y:250});l.addClass("scrollShadow");var c=new ScrollView({width:386,height:400,x:0,y:254});ClusterInfo.properties={x:0,y:0,width:384,height:1440};ClusterInfo.addClass("clusterInfo");c.addSubView(ClusterInfo);c.addClass("scrollField");n.addSubView(c);n.addSubView(l);n.addClass("infoView");t.addSubView(n);return t}function makeDNA(e,t,n){var r=new View({width:348,height:180,x:0,y:t*190});r.addSubView(addInfoHeadline(n));for(var i=0;i<5;i++)r.addSubView(addGenom(e,t,i));return r}function addInfoHeadline(e){var t=new View({width:348,height:30,X:0,y:0,html:e});t.addClass("infoHeadline");return t}function addGenom(e,t,n){var r=new View({width:348,height:30,x:0,y:30*n+30}),i=new View({width:140,height:30,x:0,y:0,html:db.questions[t].pairs[n][0]});i.addClass("pair left");r.addSubView(i);var s=returnPercent(db.clusters[e].dna[t].pairs[n]);for(var o=0;o<s.length;o++){var u=new View({width:15,height:15,x:o*19+148,y:7,opacity:returnOpacity(s[o])});u.addClass("miniResult");r.addSubView(u)}var a=new View({width:140,height:30,x:208,y:0,html:db.questions[t].pairs[n][1]});a.addClass("pair right");r.addSubView(a);return r}function addKeyValueView(e,t,n,r){var i=new View({width:384,height:30,x:0,y:r*30+5}),s=new View({width:128,height:30,x:0,y:0,html:n});s.addClass("keyView");i.addSubView(s);var o=new View({width:200,height:30,x:140,y:0,html:db.clusters[e][t]});o.addClass("valueView");i.addSubView(o);return i}function makeObjectStack(){var e=new View({x:75,y:455,width:infoGuiSize[0],height:infoGuiSize[1],html:"Stack"});e.addClass("infoButton infoGui");var t=new View({opacity:.5,x:205,y:455,width:infoGuiSize[0],height:infoGuiSize[1],html:"Vorschläge"});t.addClass("infoButton infoGui");ObjectSpace.addSubView(e);ObjectSpace.addSubView(t);e.on("click",function(){t.opacity=.5;e.opacity=1;stackObjArray.map(moveObjUp);tipObjArray.map(moveObjDown)});t.on("click",function(){e.opacity=.5;t.opacity=1;stackObjArray.map(moveObjDown);tipObjArray.map(moveObjUp)})}Framer.config.animationPrecision=30;for(var layerGroupName in PSD){window[layerGroupName]=PSD[layerGroupName];PSD[layerGroupName].originalFrame=window[layerGroupName].frame}var menuVisible=!1,stackVisible=!1,clusterInfoVisible=!1,stackObjArray=[],tipObjArray=[],infoGuiSize=[110,30,10],time=250,curve="ease-in-out",moveObjUp=function(e){e.y-=100},moveObjDown=function(e){e.y+=100};$(document).ready(function(){makeMenu();makeMenuBtn();makePlusBtn();makeSmallInfoBtn();makeObjectStack();makeEditButtons();Scene.addSubView(makeClusterInfo(0));db.objects.map(makeDragObjects)});